CC=wcc386

CPU=5
CALLING=s
ECFLAGS=
CFLAGS=-$(CPU)$(CALLING) $(ECFLAGS)

LINK=wlink
LFLAGS=system dos4g

LIB=wlib

PLOF_LIB_OBJS=src/psl.o
PSLI_OBJS=src/psli.o
PSLI_LIBS=library plof library gc

all: plof.lib psli.exe

plof.lib: $(PLOF_LIB_OBJS)
	$(LIB) -n plof.lib $(PLOF_LIB_OBJS)

psli.exe: plof.lib $(PSLI_OBJS)
	$(LINK) $(LFLAGS) $(PSLI_LIBS) option stack=10485760 file src/psli

.c.o:
	$(CC) $(CFLAGS) $< -fo=$@

clean:
	del plof.lib $(PLOF_LIB_OBJS)
	del psli.exe $(PSLI_OBJS)
